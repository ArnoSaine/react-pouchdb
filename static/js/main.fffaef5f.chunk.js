(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports={"learn-bar":"styles_learn-bar__2qN9S"}},112:function(e,t,n){e.exports=n(241)},241:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(102),i=n.n(c),s=(n(117),n(119),n(243)),u=n(3),o=n.n(u),l=n(7),d=n.n(l),f=n(22),p=n.n(f),h=n(10),m=n.n(h),v=n(20),b=n.n(v),x=n(21),y=n.n(x),k=n(27),w=n.n(k),E=n(28),g=n.n(E),j=n(29),O=n.n(j),_=n(32),C=n.n(_),N=n(13),S=n.n(N),M=n(6),I=n(103),L=n.n(I),D=n(104),R=n.n(D),q={children:Object(M.oneOfType)([M.element,M.func]),component:M.func,render:M.func},T=Object.keys(q),B=function(e,t,n){var a=e.children,c=e.component,i=e.render;return c?t?Object(r.createElement)(c,n):null:i?t?i(n):null:"function"===typeof a?a.prototype.render?Object(r.createElement)(a,n):a(n):a&&r.Children.count(a)?Object(r.cloneElement)(a,n):void 0},P=function(e){return R()(e,T)},A=n(105),W=n.n(A),F=n(37),K=n(106),$=n.n(K),U=Object(r.createContext)(),J=U,z=U.Consumer,G=U.Provider,H={db:Object(M.instanceOf)(F.a).isRequired},Q=function(e){return Object(r.forwardRef)($()(Object.assign(function(t,n){return a.a.createElement(z,null,function(r){return a.a.createElement(e,W()({},t,{db:r,ref:n}))})},{displayName:"withDB(".concat(e.displayName||e.name,")"),WrappedComponent:e}),e))},V=function(e){function t(){return b()(this,t),w()(this,g()(t).apply(this,arguments))}return O()(t,e),y()(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._listen()}},{key:"componentDidUpdate",value:function(e){var t,n;t=e,n=this.props,L()(P(t),P(n))||(this.unlisten(),this._listen())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.unlisten()}},{key:"setStateIfMounted",value:function(e){if(this._isMounted)return this.setState(e),!0}},{key:"_listen",value:function(){this.listen(P(this.props))}},{key:"unlisten",value:function(){var e=this.cancel;e&&e()}}]),t}(r.Component);S()(V,"propTypes",d()({},q,H));var X=n(48),Y=n(33),Z=n.n(Y);function ee(e,t){var n;return this.has(e)?this.get(e):(n=t(),this.set(e,n),n)}var te=new Map,ne="change";function re(e,t){var n=this,r=ee.call(te,this,function(){return new Map}),a=Z()(e),c=ee.call(r,a,function(){return{eventEmitter:n.changes(e),count:0}}),i=c.eventEmitter;return c.count=c.count+1,i.on(ne,t),function(){c.count=c.count-1,c.count?i.removeListener(ne,t):(i.cancel(),r.delete(a))}}var ae=["attachments","ajax","binary","id"],ce=function(e){function t(){var e,n;b()(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return n=w()(this,(e=g()(t)).call.apply(e,[this].concat(a))),S()(C()(C()(n)),"state",{}),n}return O()(t,e),y()(t,[{key:"listen",value:function(){var e=m()(o.a.mark(function e(t){var n,r,a,c,i,s=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.db,r=t.id,a=t.attachments,c=p()(t,["id","attachments"]),i=d()({binary:"u8a"===a},c,{attachments:!!a}),e.t0=this,e.next=6,this.get(r,i);case 6:if(e.t1=e.sent,!e.t0.setStateIfMounted.call(e.t0,e.t1)){e.next=9;break}Object.keys(t).every(function(e){return ae.includes(e)})&&(this.cancel=re.call(n,d()({},i,{live:!0,include_docs:!0,since:"now",doc_ids:[r]}),function(){var e=m()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doc,e.t0=s,e.next=4,s.nextState(n);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.setStateIfMounted.call(e.t0,e.t1));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=m()(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.db,e.prev=1,e.t0=this,e.next=5,r.get(t,n);case 5:return e.t1=e.sent,e.next=8,e.t0.nextState.call(e.t0,e.t1);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t2=e.catch(1),e.abrupt("return",{exists:!1});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"nextState",value:function(){var e=m()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("u8a"!==this.props.attachments){e.next=6;break}return e.next=3,Object(X.a)(t._attachments);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t._attachments;case 7:return e.t1=e.t0,e.t2=t,e.t3=!t._deleted,e.abrupt("return",{attachments:e.t1,doc:e.t2,exists:e.t3});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.db,n=p()(e,["db"]),r=this.state,a=this.state.exists;return B(n,a,d()({db:t},r))}}]),t}(V);S()(ce,"propTypes",d()({},V.propTypes,{attachments:Object(M.oneOf)([!0,!1,"u8a"]),binary:M.bool,id:M.string.isRequired}));Q(ce);var ie=n(12),se=n.n(ie),ue=n(49),oe=n.n(ue),le=n(24),de=n.n(le),fe=n(111),pe=n(4),he=n(5),me=n(107);F.a.plugin(fe.a);var ve=function(e){function t(){var e,n;b()(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return n=w()(this,(e=g()(t)).call.apply(e,[this].concat(a))),S()(C()(C()(n)),"state",{docs:[]}),n}return O()(t,e),y()(t,[{key:"listen",value:function(){var e=m()(o.a.mark(function e(t){var n,r,a,c,i,s,u,l=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.db,r=t.selector,a=t.limit,c=t.skip,i=t.sort,!r){e.next=11;break}if(!i){e.next=6;break}return e.next=6,n.createIndex({index:{fields:i.map(function(e){return"object"===de()(e)?Object.keys(e)[0]:e})}});case 6:return e.next=8,n.find(t);case 8:s=e.sent,u=s.docs,this.setStateIfMounted({docs:u})&&(this.cancel=re.call(n,{live:!0,include_docs:!0,since:"now",return_docs:!1},function(){var e=m()(o.a.mark(function e(s){var u,f,p,h,m,v,b,x,y,k,w,E,g,j,O,_,C;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=s.deleted,f=s.doc,p=oe()(l.state.docs),h=p.findIndex(function(e){var t=e._id;return f._id===t}),m=-1!==h,!(u||r&&!Object(he.g)(f,r))){e.next=18;break}if(!m){e.next=16;break}if(p.splice(h,1),(v=p.length)+1!==a){e.next=15;break}return e.next=11,n.find(d()({},t,{limit:1,skip:(t.skip||0)+v}));case 11:b=e.sent,x=se()(b.docs,1),(y=x[0])&&p.push(y);case 15:l.setStateIfMounted({docs:p});case 16:e.next=37;break;case 18:if(m?p[h]=f:p.push(f),i&&(k=i.map(function(e){return"object"===de()(e)?Object.entries(e)[0]:[e,"asc"]}),p.sort(function(e,t){var n=!0,r=!1,a=void 0;try{for(var c,i=k[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var s=se()(c.value,2),u=s[0],o=s[1],l=Object(pe.a)(e[u],t[u]);if(0!==l)return"asc"===o?l:-l}}catch(d){r=!0,a=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return 0})),w=p.findIndex(function(e){var t=e._id;return f._id===t}),!m||w+1!==a){e.next=28;break}return e.next=24,n.find(d()({},t,{limit:1,skip:(t.skip||0)+w}));case 24:E=e.sent,g=se()(E.docs,1),(null===(j=g[0])||void 0===j?void 0:j._id)!==f._id&&(p[w]=j);case 28:if(!c||0!==w){e.next=35;break}return e.next=31,n.find(d()({},t,{limit:1}));case 31:O=e.sent,_=se()(O.docs,1),(null===(C=_[0])||void 0===C?void 0:C._id)!==f._id&&(p[0]=C);case 35:p.length>a&&p.splice(a),l.setStateIfMounted({docs:p});case 37:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.db,n=p()(e,["db"]),r=this.state.docs;return B(n,r,{db:t,docs:r})}}]),t}(V);S()(ve,"propTypes",Object(me.forbidExtraProps)(d()({},V.propTypes,{limit:M.number,selector:M.object.isRequired,skip:M.number,sort:M.array})));Q(ve);var be=new Map,xe=new Map;var ye=function(e){function t(e){var n;b()(this,t),n=w()(this,g()(t).call(this,e));e.children;var r=e.maxListeners,a=p()(e,["children","maxListeners"]);return n.db=function(e){var t=Z()(e),n=ee.call(be,t,function(){return new F.a(e)}),r=ee.call(xe,t,function(){return 0});return xe.set(t,r+1),n}(a),r&&n.db.setMaxListeners(r),n}return O()(t,e),y()(t,[{key:"componentWillUnmount",value:function(){var e=this.props;e.children,e.maxListeners;!function(e){var t=Z()(e),n=xe.get(t)-1;xe.set(t,n),n||(be.get(t).close(),be.delete(t))}(p()(e,["children","maxListeners"]))}},{key:"render",value:function(){return a.a.createElement(G,{value:this.db},this.props.children)}}]),t}(r.Component);function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.callee,n=e.example,a=e.test,c=void 0===a||a,i=Object(r.useContext)(J);if(c){if(!i)throw new Error(t?"`".concat(t,"` was called without `db` and database is not in context. Provide database using <PouchDB /> or `").concat(n,"`"):"Database is not in context. Provide database using <PouchDB />");return i}}S()(ye,"propTypes",{children:M.node,maxListeners:M.number,name:M.string.isRequired}),S()(ye,"defaultProps",{children:null,maxListeners:void 0});var we=n(72),Ee=n.n(we),ge=n(51),je=n.n(ge),Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useEffect,n=void 0===t?r.useEffect:t,a=e.useRef,c=void 0===a?r.useRef:a,i=e.useState,s=void 0===i?r.useState:i;return function(){var e=c(),t=s.apply(void 0,arguments),r=se()(t,2),a=r[0],i=r[1];return n(function(){return e.current=!0,function(){e.current=!1}}),[a,function(t){return e.current&&i(t),e.current}]}}(),_e=new Map,Ce=function(){function e(t){var n=this,r=t.optionsKey,a=t.requests;b()(this,e),Ne.set(this,{writable:!0,value:0}),S()(this,"removeRequestIfNoListeners",function(){je()(n,Ne)||n.requests.delete(n.optionsKey)}),this.requests=a,this.optionsKey=r}return y()(e,[{key:"resetCleanupTimer",value:function(){clearTimeout(this.timeout),this.timeout=setTimeout(this.removeRequestIfNoListeners,1e4)}},{key:"increaseListenerCount",value:function(){Ee()(this,Ne,je()(this,Ne)+1)}},{key:"decreaseListenerCount",value:function(){Ee()(this,Ne,je()(this,Ne)-1),this.removeRequestIfNoListeners()}}]),e}(),Ne=new WeakMap;function Se(e,t,n,a){var c=ee.call(_e,e,function(){return new Map}),i=Z()(t),s=ee.call(c,i,function(){return new Ce({optionsKey:i,requests:c})});s.value||(s.value=m()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:s.value=e.sent;case 3:case"end":return e.stop()}},e,this)}))());var u=s.value;if(Promise.resolve(u)===u)throw s.resetCleanupTimer(),u;var l=Oe(),d=se()(l,2),f=(d[0],d[1]);return Object(r.useEffect)(function(){s.increaseListenerCount();var e=a(u,function(e){s.value=e,f(e)});return function(){s.decreaseListenerCount(),e()}},[e,i]),u}function Me(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=null!==(t=ke({callee:"useFind",example:"useFind(db, options)",test:1===arguments.length}))&&void 0!==t?t:e;var r=n.selector,a=n.limit,c=n.skip,i=n.sort;return Se(e,n,m()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=3;break}return t.next=3,e.createIndex({index:{fields:i.map(function(e){return"object"===de()(e)?Object.keys(e)[0]:e})}});case 3:return t.next=5,e.find(n);case 5:return t.abrupt("return",t.sent.docs);case 6:case"end":return t.stop()}},t,this)})),function(t,s){var u;s(t);var l=oe()(t);return(u=e,re).call(u,{live:!0,include_docs:!0,since:"now",return_docs:!1},function(){var u=m()(o.a.mark(function u(f){var p,h,m,v,b,x,y,k,w,E,g,j,O,_,C,N;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(p=f.deleted,h=f.doc,m=l.findIndex(function(e){var t=e._id;return h._id===t}),v=-1!==m,!(p||r&&!Object(he.g)(h,r))){u.next=17;break}if(!v){u.next=15;break}if(l.splice(m,1),(b=l.length)+1!==a){u.next=14;break}return u.next=10,e.find(d()({},n,{limit:1,skip:(n.skip||0)+b}));case 10:x=u.sent,y=se()(x.docs,1),(k=y[0])&&t.push(k);case 14:s(l);case 15:u.next=36;break;case 17:if(v?l[m]=h:l.push(h),i&&(w=i.map(function(e){return"object"===de()(e)?Object.entries(e)[0]:[e,"asc"]}),l.sort(function(e,t){var n=!0,r=!1,a=void 0;try{for(var c,i=w[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var s=se()(c.value,2),u=s[0],o=s[1],l=Object(pe.a)(e[u],t[u]);if(0!==l)return"asc"===o?l:-l}}catch(d){r=!0,a=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return 0})),E=l.findIndex(function(e){var t=e._id;return h._id===t}),!v||E+1!==a){u.next=27;break}return u.next=23,e.find(d()({},n,{limit:1,skip:(n.skip||0)+E}));case 23:g=u.sent,j=se()(g.docs,1),(null===(O=j[0])||void 0===O?void 0:O._id)!==h._id&&(l[E]=O);case 27:if(!c||0!==E){u.next=34;break}return u.next=30,e.find(d()({},n,{limit:1}));case 30:_=u.sent,C=se()(_.docs,1),(null===(N=C[0])||void 0===N?void 0:N._id)!==h._id&&(l[0]=N);case 34:l.length>a&&l.splice(a),s(l);case 36:case"end":return u.stop()}},u,this)}));return function(e){return u.apply(this,arguments)}}())})}var Ie=function(){return a.a.createElement("aside",{className:"learn"},a.a.createElement("header",null,a.a.createElement("h3",null,"react-pouchdb"),a.a.createElement("h5",null,"Example"),a.a.createElement("a",{href:"https://github.com/ArnoSaine/react-pouchdb/tree/master/todoapp"},"Source")),a.a.createElement("hr",null),a.a.createElement("h4",null,"Official Resources"),a.a.createElement("ul",null,[{href:"https://github.com/ArnoSaine/react-pouchdb",children:"react-pouchdb"},{href:"https://pouchdb.com",children:"PouchDB"},{href:"http://couchdb.apache.org",children:"CouchDB"}].map(function(e){return a.a.createElement("li",{key:e.href},a.a.createElement("a",e))})))},Le=n(108),De=n.n(Le),Re=function(e){var t=e.children;return a.a.createElement("div",{className:"learn-bar ".concat(De.a["learn-bar"])},a.a.createElement(Ie,null),t)},qe=n(34);function Te(){var e=ke().bulkDocs,t=Me({selector:{completed:!0}}),n=t.length;return n?a.a.createElement("button",{className:"clear-completed",onClick:function(){return e(t.map(function(e){return Object(qe.a)({},e,{_deleted:!0})}))},type:"button"},"Clear completed (",n,")"):null}function Be(){var e=Me({selector:{completed:{$ne:!0}}}).length;return a.a.createElement("span",{className:"todo-count"},e," ",1===e?"item":"items"," left")}var Pe=n(244),Ae=function(){return a.a.createElement("ul",{className:"filters"},[{path:"",title:"All"},{path:"active",title:"Active"},{path:"completed",title:"Completed"}].map(function(e){var t=e.path,n=e.title;return a.a.createElement("li",{key:t},a.a.createElement(Pe.a,{activeClassName:"selected",exact:!0,replace:!0,to:"/".concat(t)},n))}))},We=function(){return a.a.createElement("footer",{className:"footer"},a.a.createElement(Be,null),a.a.createElement(Ae,null),a.a.createElement(Te,null))};function Fe(){var e=ke().post;return a.a.createElement("input",{autoFocus:!0,className:"new-todo",onKeyDown:function(t){var n=t.keyCode,r=t.target,a=r.value.trim();13===n&&a&&(e({title:a,timestamp:Date.now()}),r.value="")},placeholder:"What needs to be done?",type:"text"})}var Ke=n(242),$e=n(52),Ue=n(110),Je=n.n(Ue);function ze(e){var t=e.doc,n=e.doc.completed,c=void 0!==n&&n,i=ke(),s=i.put,u=i.remove,o=Object(r.useState)(),l=Object($e.a)(o,2),d=l[0],f=l[1],p=Object(r.useState)(),h=Object($e.a)(p,2),m=h[0],v=h[1],b=Object(r.useState)(t.title),x=Object($e.a)(b,2),y=x[0],k=x[1],w=Object(r.useRef)();return Object(r.useEffect)(function(){d&&(w.current.focus(),f(!1))}),a.a.createElement("li",{className:Je()(c&&"completed",m&&"editing"),onDoubleClick:function(){f(!0),v(!0)}},a.a.createElement("div",{className:"view"},a.a.createElement("input",{className:"toggle",checked:c,onChange:function(){return s(Object(qe.a)({},t,{completed:!c}))},type:"checkbox"}),a.a.createElement("label",null,y),a.a.createElement("button",{className:"destroy",onClick:function(){return u(t)},type:"button"})),a.a.createElement("input",{className:"edit",ref:w,type:"text",value:y,onChange:function(e){var t=e.target.value;return k(t)},onBlur:function(){v(!1),s(Object(qe.a)({},t,{title:y}))}}))}var Ge={active:{$ne:!0},completed:!0};function He(e){var t=e.match.params.filter,n=Me({selector:{timestamp:{$gte:null},completed:Ge[t]}});return a.a.createElement("ul",{className:"todo-list"},n.map(function(e){return a.a.createElement(ze,{key:e._id,doc:e})}))}var Qe=function(){return a.a.createElement(Ke.a,{path:"/:filter?",component:He})};function Ve(){var e=Me({selector:{timestamp:{$gte:null}}}),t=ke().bulkDocs;return e.length?function(){var n=e.every(function(e){return e.completed});return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{id:"toggle-all",className:"toggle-all",checked:n,onChange:function(){return t(e.map(function(e){return Object(qe.a)({},e,{completed:!n})}))},type:"checkbox"}),a.a.createElement("label",{htmlFor:"toggle-all"}))}():null}var Xe="/react-pouchdb";var Ye=function(){return a.a.createElement(r.Suspense,{fallback:"loading..."},a.a.createElement(Re,null,a.a.createElement(ye,{name:"todoapp"},a.a.createElement(s.a,{basename:Xe},a.a.createElement("section",{className:"todoapp"},a.a.createElement("header",null,a.a.createElement("h1",null,"todos")),a.a.createElement(Fe,null),a.a.createElement("section",{className:"main"},a.a.createElement(Ve,null),a.a.createElement(Qe,null),a.a.createElement(We,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,n){"use strict";(function(e){var r=n(3),a=n.n(r),c=n(12),i=n.n(c),s=n(10),u=n.n(s),o=n(24),l=n.n(o),d=n(68),f=n.n(d),p=function(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){return t(new Uint8Array(n.result))},n.readAsArrayBuffer(e)})};t.a="object"===("undefined"===typeof e?"undefined":l()(e))&&e.Buffer?f.a:function(){var e=u()(a.a.mark(function e(t){var n,r,c,s,u,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},r=Object.entries(t),c=0;case 3:if(!(c<r.length)){e.next=11;break}return s=i()(r[c],2),u=s[0],o=s[1].data,e.next=7,p(o);case 7:n[u]=e.sent;case 8:c++,e.next=3;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}).call(this,n(39))}},[[112,2,1]]]);
//# sourceMappingURL=main.fffaef5f.chunk.js.map